{% extends 'base_signup.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block body %}
    <h2 class="title">Créer un compte</h2>

    {# Affichage des messages flash #}
    {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

    {{ form_start(signupForm) }}

    <div class="form-group">
        <label for="id">Identifiant</label>
        {{ form_widget(signupForm.id, {
            'attr': {
                'class': signupForm.id.vars.errors|length > 0 ? 'form-control is-invalid' : 'form-control',
                'required': 'required'
            }
        }) }}
        {% if signupForm.id.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(signupForm.id) }}
            </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="nom">Nom d'utilisateur</label>
        {{ form_widget(signupForm.nom, {
            'attr': {
                'class': signupForm.nom.vars.errors|length > 0 ? 'form-control is-invalid' : 'form-control',
                'required': 'required',
                'maxlength': '50'
            }
        }) }}
        {% if signupForm.nom.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(signupForm.nom) }}
            </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="email">Email</label>
        {{ form_widget(signupForm.email, {
            'attr': {
                'class': signupForm.email.vars.errors|length > 0 ? 'form-control is-invalid' : 'form-control',
                'required': 'required',
                'type': 'email'
            }
        }) }}
        {% if signupForm.email.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(signupForm.email) }}
            </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="password">Mot de passe</label>
        {{ form_widget(signupForm.password, {
            'attr': {
                'class': signupForm.password.vars.errors|length > 0 ? 'form-control is-invalid' : 'form-control',
                'required': 'required',
                'minlength': '8',
                'type': 'password'
            }
        }) }}
        {% if signupForm.password.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(signupForm.password) }}
            </div>
        {% endif %}
    </div>

    <button class="btn btn-primary btn-block" type="submit">S'inscrire</button>

    {{ form_end(signupForm) }}

    <p>Vous avez déjà un compte ? 
        <a href="{{ path('app_login') }}">Connectez-vous ici</a>
    </p>
{% endblock %}